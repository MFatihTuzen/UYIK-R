---
title: "R Programlama ile Veri Analizi"
subtitle: "Veri Ã–n Ä°ÅŸleme"
author: "Dr. Muhammed Fatih TÃœZEN"
date: 2025-5-16
date-format: "DD-MM-YYYY"
format: 
  revealjs:
    theme: white
    slide-number: true
    slide-number-format: "c / t"
    footer: "AltÄ±ncÄ± UluslararasÄ± UygulamalÄ± Ä°statistik Kongresi (UYIK 2025)"
    css: custom.css
    scrollable: true
    logo: images/TUiK_logo_Tr.jpg
editor: visual
execute:
  echo: true
  eval: true
  warning: false
  message: false
---

## Sunum PlanÄ±

<div>

::: nonincremental
-   **Veri Ã–n Ä°ÅŸleme**
-   **Eksik Veriler**
-   **Ä°mputasyon (Doldurma YÃ¶ntemleri)**
-   **AykÄ±rÄ± DeÄŸer Analizi**
-   **Veri NormalleÅŸtirme (Ã–lÃ§ekleme)**
:::

<div>

ğŸ“¦ Ders Materyalleri: <https://github.com/MFatihTuzen/UYIK-R>

</div>

</div>

------------------------------------------------------------------------

## ğŸ§¹ Veri Ã–n Ä°ÅŸleme Nedir?

### ğŸ“˜ TanÄ±m

Veri Ã¶n iÅŸleme, **ham veriyi analiz edilebilir, temiz ve anlamlÄ± hale getirme sÃ¼recidir.**\
Bu adÄ±m, istatistiksel analiz, makine Ã¶ÄŸrenmesi ve raporlama sÃ¼reÃ§lerinin temelidir.

### ğŸ” Neden Gereklidir?

-   GerÃ§ek dÃ¼nya verisi genellikle **eksik**, **hatalÄ±**, **daÄŸÄ±nÄ±k**, **Ã¶lÃ§eksizdir**
-   Model performansÄ±nÄ± ve analiz doÄŸruluÄŸunu doÄŸrudan etkiler
-   Veri kalitesi analiz kalitesini doÄŸrudan belirler
-   â€œÃ‡Ã¶p girerse Ã§Ã¶p Ã§Ä±karâ€ â†’ Garbage In, Garbage Out ğŸ—‘ï¸

### ğŸ“Š Modelleme SÃ¼recindeki Yeri

> `Veri Toplama â†’ Veri Ã–n Ä°ÅŸleme â†’ Modelleme â†’ DeÄŸerlendirme â†’ Raporlama`

ğŸ¯ GÃ¼Ã§lÃ¼ modellerin temelinde iyi hazÄ±rlanmÄ±ÅŸ veri yatar

------------------------------------------------------------------------

## ğŸ§­ Veri Ã–n Ä°ÅŸleme Hangi AdÄ±mlarÄ± Kapsar?

### ğŸ”„ Genel SÃ¼reÃ§ AdÄ±mlarÄ±

1.  **Veri Temizleme**
    -   Eksik gÃ¶zlemler (NA)
    -   AykÄ±rÄ± deÄŸerler
    -   Bozuk formatlar, tutarsÄ±z kategoriler
2.  **Veri DÃ¶nÃ¼ÅŸtÃ¼rme**
    -   Ã–lÃ§ekleme (normalleÅŸtirme / standardizasyon)
    -   Kodlama (kategori â†’ sayÄ±sal)
    -   DÃ¶nÃ¼ÅŸÃ¼mler (log, sqrt vs.)
3.  **Veri BÃ¼tÃ¼nleÅŸtirme**
    -   FarklÄ± kaynaklardan verilerin birleÅŸtirilmesi
    -   Join, merge, bind iÅŸlemleri
4.  **DeÄŸiÅŸken SeÃ§imi / Ã–zellik MÃ¼hendisliÄŸi**
    -   Gereksiz deÄŸiÅŸkenlerin Ã§Ä±karÄ±lmasÄ±
    -   Yeni deÄŸiÅŸkenlerin oluÅŸturulmasÄ±

## ğŸ› ï¸ SÄ±k KullanÄ±lan Fonksiyonlar & Paketler

### ğŸ” R FonksiyonlarÄ±

-   `is.na()`, `summary()`, `glimpse()`, `str()`
-   `mutate()`, `if_else()`, `case_when()`
-   `scale()`, `cut()`, `factor()`
-   `rename()`, `select()`, `arrange()`

### ğŸ“¦ FaydalÄ± Paketler

-   `dplyr`, `tidyr` â†’ veri dÃ¶nÃ¼ÅŸtÃ¼rme
-   `janitor` â†’ deÄŸiÅŸken isimlerini temizleme (`clean_names()`)
-   `naniar`, `VIM` â†’ eksik veri gÃ¶rselleÅŸtirme
-   `recipes`, `caret` â†’ Ã¶lÃ§ekleme, Ã¶n iÅŸleme zinciri
-   `datawizard`, `forcats`, `lubridate` â†’ Ã¶zel veri tÃ¼rleriyle Ã§alÄ±ÅŸma

> ğŸ” Ã–n iÅŸleme sadece temizlik deÄŸil; aynÄ± zamanda **hazÄ±rlÄ±k ve gÃ¼Ã§lendirme** sÃ¼recidir.
>
> ğŸ’¡ Analizin kalitesi veriye ne kadar iyi dokunduÄŸunuzla doÄŸrudan iliÅŸkilidir.

------------------------------------------------------------------------

## ğŸ“‚ KullanÄ±lacak Veri Seti: `airquality`

### ğŸ“˜ TanÄ±m

`airquality` veri seti, **New York'ta MayÄ±sâ€“EylÃ¼l 1973** tarihleri arasÄ±nda gÃ¼nlÃ¼k olarak Ã¶lÃ§Ã¼len hava kalitesi verilerini iÃ§erir.\
R iÃ§inde **hazÄ±r olarak** gelir, kuruluma gerek yoktur.

### ğŸ”¢ DeÄŸiÅŸkenler

| DeÄŸiÅŸken  | AÃ§Ä±klama                             |
|-----------|--------------------------------------|
| `Ozone`   | Ozon miktarÄ± (ppb)                   |
| `Solar.R` | GÃ¼neÅŸ radyasyonu (lang)              |
| `Wind`    | RÃ¼zgar hÄ±zÄ± (mph)                    |
| `Temp`    | SÄ±caklÄ±k (Fahrenheit)                |
| `Month`   | Ay bilgisi (5 = MayÄ±s, â€¦, 9 = EylÃ¼l) |
| `Day`     | GÃ¼n bilgisi                          |

### â— Veri Ã–zellikleri

-   **Eksik deÄŸerler** var (`Ozone`, `Solar.R`)
-   **AykÄ±rÄ± gÃ¶zlemler** tespit edilebilir
-   TÃ¼m sayÄ±sal deÄŸiÅŸkenler â†’ **Ã¶lÃ§ekleme iÃ§in uygun**
-   KÃ¼Ã§Ã¼k boyutlu ve eÄŸitime ideal

> ğŸ§ª TÃ¼m uygulamalarÄ± bu veri seti Ã¼zerinden gerÃ§ekleÅŸtireceÄŸiz

------------------------------------------------------------------------

## ğŸ§© Eksik Veri Nedir?

### ğŸ“˜ TanÄ±m

Eksik veri (missing data), bir gÃ¶zlem birimi iÃ§in **ilgili deÄŸiÅŸkenin deÄŸerinin mevcut olmamasÄ±** durumudur.\
R ortamÄ±nda bu durum `NA` (Not Available) ile gÃ¶sterilir.

### ğŸ“‰ Neden Ã–nemlidir?

-   SonuÃ§larÄ±n **yanlÄ±** olmasÄ±na neden olabilir
-   Ã–rneklem bÃ¼yÃ¼klÃ¼ÄŸÃ¼nÃ¼ azaltÄ±r
-   BazÄ± analizler `NA` barÄ±ndÄ±ran gÃ¶zlemleri dÄ±ÅŸlar
-   BazÄ± yÃ¶ntemler eksik veri iÃ§eren deÄŸiÅŸkenlerde **Ã§alÄ±ÅŸmaz**

> â— Eksik veriyi silmek deÄŸil, **anlamak ve doÄŸru yÃ¶netmek** gerekir.

------------------------------------------------------------------------

## â“ Eksik Veri Neden OluÅŸur? â€“ TÃ¼rleri

### ğŸ’¥ YaygÄ±n Nedenler

-   Ã–lÃ§Ã¼m yapÄ±lmamasÄ±
-   Cevap vermeme (anketler)
-   SensÃ¶r hatalarÄ±
-   Veri aktarÄ±m sorunlarÄ±
-   Filtreleme/kriterlere baÄŸlÄ± dÄ±ÅŸlama

### ğŸ§  Eksik Veri TÃ¼rleri

| TÃ¼r      | AÃ§Ä±klama                                                                                              |
|----------|-------------------------------------------------------------------------------------------------------|
| **MCAR** | Eksiklik rastgele ve tÃ¼m gÃ¶zlemler iÃ§in eÅŸit olasÄ±lÄ±kla oluÅŸur                                        |
| **MAR**  | Eksiklik, gÃ¶zlemlenebilen diÄŸer deÄŸiÅŸkenlerle iliÅŸkilidir (Ã¶rneÄŸin yaÅŸ arttÄ±kÃ§a eksik olma olasÄ±lÄ±ÄŸÄ±) |
| **MNAR** | Eksiklik, gÃ¶zlemlenemeyen bir Ã¶zelliÄŸe baÄŸlÄ±dÄ±r (Ã¶rneÄŸin Ã§ok hasta bireylerin veri vermemesi)         |

> ğŸ¯ TÃ¼rÃ¼nÃ¼ bilmek â†’ uygun iÅŸlem tekniÄŸini seÃ§mek iÃ§in kritik!

------------------------------------------------------------------------

## ğŸ§  Eksik Veri TÃ¼rleri â€“ AÃ§Ä±klamalar ve Ã–rnekler

### ğŸ“Œ 1. MCAR â€“ Missing Completely at Random

> Eksik deÄŸerler tamamen rastgele oluÅŸur; **hiÃ§bir deÄŸiÅŸkenle iliÅŸkili deÄŸildir.**

ğŸ” **Ã–rnek:**\
Anket kÃ¢ÄŸÄ±dÄ±nÄ±n bir kÄ±smÄ±nÄ±n yanlÄ±ÅŸlÄ±kla yÄ±rtÄ±lmasÄ± ve bazÄ± sorularÄ±n kaybolmasÄ±

âœ… Yorum:\
Analiz iÃ§in en gÃ¼venli eksiklik tÃ¼rÃ¼dÃ¼r â†’ **yanlÄ±lÄ±k yaratmaz**

### ğŸ“Œ 2. MAR â€“ Missing at Random

> Eksiklik, gÃ¶zlemlenebilen baÅŸka bir deÄŸiÅŸkenle iliÅŸkilidir.\
> Eksiklik rastgele deÄŸildir, **ama aÃ§Ä±klanabilir.**

ğŸ” **Ã–rnek:**\
YaÅŸ arttÄ±kÃ§a gelir bilgisini paylaÅŸmama olasÄ±lÄ±ÄŸÄ± artar (yaÅŸ gÃ¶zlemlenebilir ama gelir eksik)

âš ï¸ Yorum:\
Eksik veri atamalarÄ± yapÄ±labilir, ama dikkatli olmak gerekir

### ğŸ“Œ 3. MNAR â€“ Missing Not at Random

> Eksiklik, **gÃ¶zlemlenemeyen bir nedene** baÄŸlÄ±dÄ±r.\
> Eksik olma durumu, doÄŸrudan eksik deÄŸerin kendisiyle ilgilidir.

ğŸ” **Ã–rnek:**\
AÅŸÄ±rÄ± yÃ¼ksek gelirli bireylerin gelir bilgisini gizlemesi (kimlerin eksik bÄ±raktÄ±ÄŸÄ± bilgisi gÃ¶zlemlenemiyor)

ğŸš¨ Yorum:\
Modelleme iÃ§in **en riskli durumdur** â†’ Ä°mputasyon yanlÄ± olabilir

> ğŸ¯ Eksik verinin tÃ¼rÃ¼ bilinmeden doÄŸru mÃ¼dahale yapÄ±lamaz!

------------------------------------------------------------------------

## ğŸ” R ile Eksik Veri Tespiti

### ğŸ”§ Temel Fonksiyonlar

```{r}
air_data <- airquality
summary(air_data)
```

Her deÄŸiÅŸkenin minâ€“max, NA durumu gÃ¶rÃ¼lÃ¼r.

```{r}
sum(is.na(air_data))
colSums(is.na(air_data))
```

TÃ¼m veri setindeki ve deÄŸiÅŸken bazlÄ± eksik deÄŸer sayÄ±larÄ±

### ğŸ“Œ Eksik olan gÃ¶zlemleri filtreleme

```{r}
air_data[!complete.cases(air_data), ]
```

-   En az bir NA iÃ§eren satÄ±rlar

-   `complete.cases()` fonksiyonu Ã§ok gÃ¼Ã§lÃ¼ ve pratik

ğŸ¯ SayÄ±sal tespit analizden Ã¶nce kontrol listesinin baÅŸÄ±nda olmalÄ±

------------------------------------------------------------------------

## ğŸ§° Eksik Veriyi GÃ¶rselleÅŸtirme

### ğŸ“¦ `naniar` paketi

```{r}
library(naniar)
gg_miss_var(air_data)
```

DeÄŸiÅŸken bazÄ±nda eksik oranÄ± Ã§ubuÄŸu

```{r}
vis_miss(air_data)
```

Tabloda eksik vs dolu alanlarÄ±n gÃ¶sterimi (Ä±sÄ± haritasÄ± gibi)

## ğŸ“¦ Alternatif: `visdat` paketi

```{r}
library(visdat)
vis_dat(air_data)
```

Veri tipleriyle birlikte eksikliÄŸi ve yapÄ±yÄ± renkli olarak sunar

------------------------------------------------------------------------

## ğŸ”„ Eksik Veri Doldurma (Ä°mputasyon) Nedir?

### ğŸ“˜ TanÄ±m

Ä°mputasyon, eksik verilerin **istatistiksel veya algoritmik yÃ¶ntemlerle** tahmin edilerek doldurulmasÄ± iÅŸlemidir.

### ğŸ¯ Neden Gerekli?

-   Ã–rneklem boyutunu korur
-   BazÄ± analiz teknikleri eksik veri kabul etmez
-   Bias riskini azaltÄ±r (Ã¶zellikle MCAR/MAR durumlarÄ±nda)

### â— Ne Zaman Risklidir?

-   MNAR durumlarÄ±nda
-   AykÄ±rÄ± deÄŸerler iÃ§eren deÄŸiÅŸkenlerde
-   KÃ¼Ã§Ã¼k veri setlerinde â€œortalama ile doldurmaâ€ genellikle **tehlikelidir**

> ğŸ§  Ä°mputasyon dikkat ister: YanlÄ±ÅŸ teknik = yanlÄ±ÅŸ sonuÃ§

------------------------------------------------------------------------

### ğŸ”§ Basit Ä°mputasyon YÃ¶ntemleri

```{r}
# Ortalama ile
air_data$Ozone <- ifelse(is.na(air_data$Ozone),
                           mean(air_data$Ozone, na.rm = TRUE),
                           air_data$Ozone)

# Ortanca ile
air_data$Solar.R<- ifelse(is.na(air_data$Solar.R),
                             median(air_data$Solar.R, na.rm = TRUE),
                             air_data$Solar.R)
```

âš ï¸ Ortalamayla doldurmak varyansÄ± kÃ¼Ã§Ã¼ltÃ¼r â†’ modelleme etkilenebilir

ğŸ” Basit yÃ¶ntemler hÄ±zlÄ±dÄ±r ama **istatistiksel varsayÄ±mlarÄ± bozabilir**

Bu yÃ¼zden daha sofistike yaklaÅŸÄ±mlar gerekir.

------------------------------------------------------------------------

### **MICE (Multivariate Imputation by Chained Equations)**

-   DeÄŸiÅŸkenler arasÄ± iliÅŸkiyi koruyarak eksik deÄŸerleri tahmin eder

-   Her eksik deÄŸiÅŸken iÃ§in ayrÄ± regresyon modeli kurar (chain)

-   Ã‡oklu imputasyon yapar: `m` kez tekrar eder â†’ belirsizlik dikkate alÄ±nÄ±r

```{r}
air_data <- airquality
# airquality veri setini gÃ¶zden geÃ§ir
summary(air_data)
# Gerekli paket
library(mice)
# Ã‡oklu imputasyon baÅŸlat
# method = "pmm" predictive mean matching kullanÄ±r
# m = 5 â†’ 5 farklÄ± tamamlanmÄ±ÅŸ veri seti Ã¼retilecek
# seed â†’ tekrar Ã¼retilebilirlik iÃ§in sabitlenir
imp <- mice(air_data, method = "pmm", m = 5, seed = 123)

# Ä°lk tamamlanmÄ±ÅŸ (impute edilmiÅŸ) veri setini al
completed_data <- complete(imp, 1)
# Ozone deÄŸiÅŸkeninin imputasyon sonrasÄ± daÄŸÄ±lÄ±mÄ±
summary(completed_data$Ozone)
```

ğŸ§¾ **AÃ§Ä±klamalar:**

-   `mice()` fonksiyonu eksik verileri deÄŸiÅŸken bazlÄ± modellerle doldurur.

-   `pmm`: Tahmin edilen deÄŸere en yakÄ±n gÃ¶zlemin deÄŸeri kullanÄ±lÄ±r â†’ aykÄ±rÄ± deÄŸer Ã¼retme riski dÃ¼ÅŸer.

-   `complete(imp, 1)`: 5 farklÄ± tamamlanmÄ±ÅŸ veri setinden ilkini alÄ±rÄ±z.

-   Bu iÅŸlemin sonunda elde ettiÄŸimiz `completed_data` modeli kurmaya hazÄ±r hale gelir.

------------------------------------------------------------------------

### **missForest** (Random Forest ile imputasyon)

-   Hem sayÄ±sal hem kategorik verilerle Ã§alÄ±ÅŸÄ±r

-   Karar aÄŸaÃ§larÄ± kullanarak eksik deÄŸerleri tahmin eder

-   DÄ±ÅŸsal deÄŸiÅŸkenleri etkili biÃ§imde kullanÄ±r

```{r}
# Gerekli paket
library(missForest)

# Random Forest ile imputasyon (dikkat: zaman alabilir!)
# ntree = 100 default, istenirse artÄ±rÄ±labilir
# verbose = TRUE â†’ iÅŸlem ilerleyiÅŸini gÃ¶sterir
set.seed(123)
imp_rf <- missForest(air_data, verbose = TRUE)

# Ä°mpute edilmiÅŸ veri setine eriÅŸim
imputed_data <- imp_rf$ximp

# KarÅŸÄ±laÅŸtÄ±rma: Ozone deÄŸiÅŸkeni
summary(air_data$Ozone)
summary(imputed_data$Ozone)

```

ğŸ§¾ **AÃ§Ä±klamalar:**

-   `missForest()` hem sayÄ±sal hem kategorik deÄŸiÅŸkenlerde Ã§alÄ±ÅŸÄ±r

-   Decision tree yapÄ±larÄ± sayesinde doÄŸrusal olmayan iliÅŸkileri de Ã¶ÄŸrenir

-   `ximp`: Eksik veriler doldurulmuÅŸ hali

-   `OOBerror` gibi hata Ã¶lÃ§Ã¼leri de dÃ¶ner (isteÄŸe baÄŸlÄ± kullanÄ±labilir)

------------------------------------------------------------------------

## ğŸ” Ã‡oklu Ä°mputasyon

### ğŸ§© Sorun:

Eksik deÄŸerler olduÄŸunda, **tek bir deÄŸerle** (Ã¶rneÄŸin ortalama veya tek bir imputasyon sonucu) doldurmak, o deÄŸeri **gerÃ§ek gibi varsaymak** demektir.

Ama bu doÄŸru deÄŸil Ã§Ã¼nkÃ¼:

-   AslÄ±nda neyin oraya gelmesi gerektiÄŸini bilmiyoruz.

-   Ä°mputasyon **belirsizlik iÃ§erir**. Bu belirsizliÄŸi tek bir setle gÃ¶z ardÄ± ederiz.

### ğŸ§  Ã‡Ã¶zÃ¼m: Ã‡oklu Ä°mputasyon (Multiple Imputation)

-   MICE gibi algoritmalar bu yÃ¼zden **m farklÄ± tamamlanmÄ±ÅŸ veri seti Ã¼retir.**

-   Her biri farklÄ± bir olasÄ±lÄ±k dahilinde eksik gÃ¶zlemleri doldurur.

-   Bu, sanki eksik veri yerine birkaÃ§ â€œsenaryoâ€ koymak gibidir.

### ğŸ”¬ Ä°statistiksel AvantajÄ±

Ã‡oklu imputasyonla yapÄ±lan analizlerde:

-   **Tahminlerin ortalamasÄ±** alÄ±nÄ±r

-   **Varyanslar birleÅŸtirilir** (hem model iÃ§i hem imputasyon varyansÄ±)

-   BÃ¶ylece **daha gÃ¼venilir ve doÄŸru gÃ¼ven aralÄ±klarÄ±** elde edilir

## ğŸ“Œ UygulamalÄ± Ã–rnek: Neden Ã–nemli?

### Tek imputasyonla yapÄ±lan analiz

```{r}
model1 <- lm(Ozone ~ Solar.R + Wind + Temp, data = completed_data)
summary(model1)
```

Bu sana regresyon katsayÄ±larÄ± verir ama ÅŸunu gÃ¶z ardÄ± eder:

âŒ "TamamladÄ±ÄŸÄ±m veride belirsizlik vardÄ±, ama ben onu tek bir gerÃ§ek gibi kabul ettim."

### Ã‡oklu imputasyonla yapÄ±lan analiz

```{r}
# Her bir tamamlanmÄ±ÅŸ veri seti iÃ§in model kurulumu
fit <- with(imp, lm(Ozone ~ Solar.R + Wind + Temp))

# TÃ¼m modellerin birleÅŸtirilmesi
pooled <- pool(fit)

# HavuzlanmÄ±ÅŸ (pool edilmiÅŸ) regresyon sonuÃ§larÄ±
summary(pooled)
```

ğŸ§¾ **AÃ§Ä±klamalar:**

-   `with()`: Her bir imputasyon setinde regresyon kurar

-   `pool()`: Bu regresyonlarÄ±n sonuÃ§larÄ±nÄ± birleÅŸtirir, varyans ve belirsizliÄŸi yansÄ±tarak gÃ¼venilir sonuÃ§ sunar

-   `summary(pooled)`: Nihai regresyon Ã§Ä±ktÄ±sÄ±nÄ± verir

## ğŸ§° DiÄŸer Ä°mputasyon YÃ¶ntemleri

```{r}
#| echo: false
library(knitr)
tibble::tibble(
  YÃ¶ntem = c(
    "Listwise Deletion",
    "Ortalama / Medyan / Mod",
    "LOCF (Last Obs. Carried Fwd)",
    "Linear Interpolation",
    "KNN Imputation",
    "MICE",
    "missForest",
    "EM Algorithm"
  ),
  AÃ§Ä±klama = c(
    "NA iÃ§eren gÃ¶zlemleri tamamen siler",
    "Sabit deÄŸerle doldurma",
    "Ã–nceki gÃ¶zlemi taÅŸÄ±ma (zaman serisi)",
    "DoÄŸrusal interpolasyon",
    "KomÅŸu benzer gÃ¶zlemlere gÃ¶re doldurma",
    "Zincirleme Ã§oklu regresyon",
    "Random Forest ile doldurma",
    "OlasÄ±lÄ±ksal, iteratif model"
  ),
  Avantaj = c(
    "Basit, hÄ±zlÄ±",
    "UygulamasÄ± kolay",
    "Zaman serisinde kullanÄ±ÅŸlÄ±",
    "Trend korunur, sade",
    "Ä°liÅŸkiyi korur",
    "Belirsizlik dahil",
    "KarmaÅŸÄ±k yapÄ±larÄ± Ã¶ÄŸrenir",
    "Ä°statistiksel temelli"
  ),
  Dezavantaj = c(
    "Veri kaybÄ±, Ã¶nyargÄ±",
    "Varyans azalÄ±r, iliÅŸki bozulur",
    "Trend ve varyans yok sayÄ±lÄ±r",
    "Ani deÄŸiÅŸimleri yakalayamaz",
    "YavaÅŸ, hesaplama maliyetli",
    "YavaÅŸ, uzmanlÄ±k ister",
    "YorumlamasÄ± zor",
    "Ä°leri dÃ¼zey bilgi gerekir"
  )
) %>%
  kable(caption = "Eksik Veri Doldurma YÃ¶ntemleri KarÅŸÄ±laÅŸtÄ±rmasÄ±", align = "l")
```

------------------------------------------------------------------------

### ğŸ“Œ Ne Zaman Hangi YÃ¶ntem?

-   **KeÅŸifsel analiz**: Ortalama, medyan, listwise
-   **Modelleme Ã¶ncesi**: MICE, missForest
-   **Zaman serisi**: LOCF, interpolation
-   **KarmaÅŸÄ±k veri yapÄ±sÄ±**: KNN, missForest
-   **Ä°statistiksel Ã§Ä±karÄ±m Ã¶nemliyse**: MICE, EM

### ğŸ§  Tavsiye

> **YÃ¶ntem seÃ§imi veri tipine ve analiz amacÄ±na gÃ¶re yapÄ±lmalÄ±dÄ±r.**\
> â€œBir yÃ¶ntem herkese uymaz.â€ Verinin yapÄ±sÄ±nÄ± iyi tanÄ±mak en bÃ¼yÃ¼k avantajdÄ±r.

## ğŸš¨ AykÄ±rÄ± DeÄŸer Nedir ve Neden Ã–nemlidir?

### ğŸ” TanÄ±m:

> AykÄ±rÄ± deÄŸer (outlier), veri setindeki diÄŸer gÃ¶zlemlerle karÅŸÄ±laÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda **anormal derecede farklÄ±** olan bir deÄŸerdir.

### ğŸ¯ Neden Ã–nemlidir?

-   ğŸ”§ **Analizleri bozabilir**: Ortalama, varyans, korelasyon gibi Ã¶lÃ§Ã¼leri Ã§arpÄ±tabilir.
-   ğŸ“‰ **Modelleme hatasÄ± oluÅŸturabilir**: Regresyon gibi modellerde etki bÃ¼yÃ¼k olabilir.
-   ğŸ•µï¸â€â™€ï¸ **GerÃ§ek dÄ±ÅŸÄ± deÄŸer mi yoksa ilginÃ§ bir sinyal mi?** â€“ her zaman silinmemeli.

## ğŸ“Œ Ã–rnek Durumlar

-   Anket verisinde: â€œAylÄ±k gelirâ€ â†’ 5 milyon TL (veri giriÅŸi hatasÄ± mÄ±?)
-   Zaman serisinde: Aniden sÄ±fÄ±rlanan Ã¼retim verisi
-   AlgÄ±lama sistemi: UÃ§ bir sÄ±caklÄ±k deÄŸeri â€“ hata mÄ± yoksa alarm mÄ±?

### ğŸ§  Tavsiye

> AykÄ±rÄ± deÄŸer **her zaman sorun deÄŸil**, ama **ne olduÄŸu bilinmeden model kurulmaz.**\
> â€œÃ–nce anlamaya Ã§alÄ±ÅŸ, sonra temizle!â€

## ğŸ› ï¸ AykÄ±rÄ± DeÄŸer Belirleme YÃ¶ntemleri

### ğŸ“Š 1. IQR (Interquartile Range) YÃ¶ntemi

Matematiksel tanÄ±m:

$$
\text{IQR} = Q_3 - Q_1 \\
\text{Alt sÄ±nÄ±r} = Q_1 - 1.5 \times \text{IQR} \\
\text{Ãœst sÄ±nÄ±r} = Q_3 + 1.5 \times \text{IQR}
$$

Bu aralÄ±k dÄ±ÅŸÄ±ndaki gÃ¶zlemler **aykÄ±rÄ±** kabul edilir.

```{r}
# Ã–rnek veri: air_data$Ozone
iqr <- IQR(air_data$Ozone, na.rm = TRUE)                # IQR hesapla
q1 <- quantile(air_data$Ozone, 0.25, na.rm = TRUE)      # 1. Ã§eyrek
q3 <- quantile(air_data$Ozone, 0.75, na.rm = TRUE)      # 3. Ã§eyrek

# Alt ve Ã¼st sÄ±nÄ±rlar
lower <- q1 - 1.5 * iqr
upper <- q3 + 1.5 * iqr

# AykÄ±rÄ± deÄŸerlerin filtrelenmesi
outliers_iqr <- air_data %>%
  filter(Ozone < lower | Ozone > upper)

outliers_iqr
```

------------------------------------------------------------------------

### ğŸ§® 2. Z-Skoru YÃ¶ntemi

Matematiksel ifade:

$$
z = \frac{x - \mu}{\sigma}
$$

Genellikle $|z| > 3$ olan deÄŸerler aykÄ±rÄ± kabul edilir.

```{r}
# Z-skoru hesaplama
ozone_mean <- mean(air_data$Ozone, na.rm = TRUE)
ozone_sd <- sd(air_data$Ozone, na.rm = TRUE)

library(dplyr)
air_data <- air_data %>%
  mutate(z_score = (Ozone - ozone_mean) / ozone_sd)

# AykÄ±rÄ± deÄŸerlerin seÃ§ilmesi
outliers_z <- air_data %>%
  filter(abs(z_score) > 3)

outliers_z
```

------------------------------------------------------------------------

### ğŸ‘€ 3. GÃ¶rsel YÃ¶ntemler (Boxplot)

::: columns
::: {.column width="90%"}
```{r}
library(ggplot2)

ggplot(air_data, aes(y = Ozone)) +
  geom_boxplot(fill = "lightblue") +
  labs(
    title = "Ozone DeÄŸiÅŸkeni Ä°Ã§in Boxplot",
    y = "Ozone"
  ) +
  theme_minimal()
```
:::
:::

------------------------------------------------------------------------

### ğŸ” DiÄŸer YÃ¶ntemler (Ä°leri Seviye)

| YÃ¶ntem                         | AÃ§Ä±klama                                        |
|--------------------------------|-------------------------------------------------|
| **Mahalanobis Mesafesi**       | Ã‡ok deÄŸiÅŸkenli aykÄ±rÄ±lÄ±k tespiti                |
| **LOF (Local Outlier Factor)** | YoÄŸunluk temelli, kÃ¼melenme analizinde gÃ¼Ã§lÃ¼    |
| **DBSCAN**                     | AykÄ±rÄ±larÄ± ayrÄ± kÃ¼meye yerleÅŸtirir              |
| **Isolation Forest**           | Makine Ã¶ÄŸrenmesi temelli, bÃ¼yÃ¼k veri iÃ§in uygun |

### ğŸ’¬ Yorum

> Z-skoru ve IQR yÃ¶ntemleri tek deÄŸiÅŸkenli analiz iÃ§in yeterlidir.\
> Ancak Ã§ok deÄŸiÅŸkenli veri veya yoÄŸunluk bilgisi varsa daha geliÅŸmiÅŸ yÃ¶ntemler tercih edilmelidir.

## ğŸ”§ AykÄ±rÄ± DeÄŸerlere MÃ¼dahale YÃ¶ntemleri

### ğŸ› ï¸ Ne YapÄ±labilir?

-   **Silmek (listwise deletion)**\
    AÅŸÄ±rÄ± uÃ§ta ve aÃ§Ä±kÃ§a hatalÄ±ysa â†’ Ã¶rn: 9999 gibi girilmiÅŸ anket hatalarÄ±

-   **Winsorization (sÄ±nÄ±r kÄ±rpma)**\
    AykÄ±rÄ± deÄŸerler Ã¼st/alt Ã§eyrek sÄ±nÄ±rlarÄ±na eÅŸitlenir\
    (Ã¶rn. en bÃ¼yÃ¼k %1 deÄŸer, %99'luk deÄŸere Ã§ekilir)

-   **Log veya Box-Cox dÃ¶nÃ¼ÅŸÃ¼mleri**\
    Ã‡arpÄ±k daÄŸÄ±lÄ±mlar iÃ§in â†’ aykÄ±rÄ± etkisi yumuÅŸatÄ±lÄ±r

-   **GÃ¶zlemi iÅŸaretlemek (flag)**\
    Modelden Ã§Ä±karmak yerine â€œaykÄ±rÄ±â€ etiketi ile takip etmek

-   **KaynaÄŸÄ±ndan kontrol ve dÃ¼zeltme**\
    MÃ¼mkÃ¼nse verinin kaynaÄŸÄ±nda hatalÄ± giriÅŸ olup olmadÄ±ÄŸÄ±na bakmak

### ğŸ§  Tavsiye:

> **AykÄ±rÄ± deÄŸeri hemen silme.**\
> Ã–nce incele: hata mÄ±, yoksa anlamlÄ± bir uyarÄ± mÄ±?\
> GerekÃ§eni yaz, analizini hem â€œÃ¶ncesiâ€ hem â€œsonrasÄ±â€ ile karÅŸÄ±laÅŸtÄ±r.

## âš–ï¸ Veri NormalleÅŸtirme

### ğŸ§® TanÄ±m:

> Veri normalleÅŸtirme, farklÄ± Ã¶lÃ§eklerdeki deÄŸiÅŸkenleri **ortak bir Ã¶lÃ§ekte ifade etmek** iÃ§in yapÄ±lan dÃ¶nÃ¼ÅŸÃ¼mdÃ¼r.

### ğŸ¯ Neden Gereklidir?

-   ğŸ“Š DeÄŸiÅŸkenler farklÄ± Ã¶lÃ§eklerdeyse model hatalÄ± Ã¶ÄŸrenir\
    (Ã¶rn. gelir: 10.000, yaÅŸ: 30 â†’ gelir etkisi abartÄ±lÄ±r)
-   ğŸ“ UzaklÄ±k tabanlÄ± yÃ¶ntemlerde (k-means, kNN, PCA) Ã§ok kritiktir
-   ğŸ“ˆ Modelin eÄŸitimi ve yorumlanabilirliÄŸi kolaylaÅŸÄ±r

------------------------------------------------------------------------

### ğŸ” En YaygÄ±n YÃ¶ntemler

| YÃ¶ntem                       | FormÃ¼l                                           | AÃ§Ä±klama                                           |
|------------------------------|--------------------------------------------------|----------------------------------------------------|
| **Min-Max Normalizasyonu**   | $$ x' = \frac{x - \min(x)}{\max(x) - \min(x)} $$ | 0â€“1 aralÄ±ÄŸÄ±na dÃ¶nÃ¼ÅŸtÃ¼rÃ¼r                           |
| **Z-Skoru Standardizasyonu** | $$ z = \frac{x - \mu}{\sigma} $$                 | Ortalama 0, sd = 1 olacak ÅŸekilde standardize eder |
| **Robust Scaling**           | $$ x' = \frac{x - \text{median}}{\text{IQR}} $$  | AykÄ±rÄ± deÄŸerlerden daha az etkilenir               |

### ğŸ§  Tavsiye

> Modelleme Ã¶ncesi **Ã¶zellikle regresyon ve mesafe tabanlÄ± algoritmalarda** normalizasyon uygulanmalÄ±dÄ±r.\
> Ama aÄŸaÃ§ tabanlÄ± yÃ¶ntemlerde (decision tree, random forest) genellikle gerekmez.

## ğŸ”§ NormalleÅŸtirme YÃ¶ntemleri

### ğŸ“Š Ã–rnek: `air_data$Temp` deÄŸiÅŸkeni Ã¼zerinde 3 farklÄ± yÃ¶ntem

```{r}
library(dplyr)

# Ã–rnek veri
x <- air_data$Temp

# Min-Max
minmax_scaled <- (x - min(x, na.rm = TRUE)) / (max(x, na.rm = TRUE) - min(x, na.rm = TRUE))

# Z-skoru
z_scaled <- scale(x)

# Robust scaling (medyan ve IQR ile)
med <- median(x, na.rm = TRUE)
iqr <- IQR(x, na.rm = TRUE)
robust_scaled <- (x - med) / iqr

# Yeni tablo
normalized_df <- tibble(
  Original = x,
  MinMax = minmax_scaled,
  ZScore = as.numeric(z_scaled),
  Robust = robust_scaled
)

head(normalized_df, 6)
```

------------------------------------------------------------------------

### ğŸ“‰ GÃ¶rsel KarÅŸÄ±laÅŸtÄ±rma

::: columns
::: {.column width="90%"}
```{r}
library(tidyr)
library(ggplot2)

# Uzun formata Ã§evir ve gÃ¶rselleÅŸtir
normalized_df_long <- normalized_df %>%
  pivot_longer(cols = -Original, names_to = "Method", values_to = "Value")

ggplot(normalized_df_long, aes(x = Value, fill = Method)) +
  geom_density(alpha = 0.5) +
  facet_wrap(~ Method, scales = "free") +
  labs(title = "NormalleÅŸtirme YÃ¶ntemleriyle DÃ¶nÃ¼ÅŸÃ¼m DaÄŸÄ±lÄ±mlarÄ±") +
  theme_minimal()
```
:::
:::

### ğŸ“Œ Not:

-   Bu yÃ¶ntemler **veri setinin yapÄ±sÄ±nÄ± bozmaz**, sadece **Ã¶lÃ§eÄŸini deÄŸiÅŸtirir**.
-   GÃ¶zlemler arasÄ± sÄ±ralama, daÄŸÄ±lÄ±m ÅŸekli ve korelasyon korunur.
-   **AmaÃ§:** Ã–lÃ§ekleri eÅŸitleyerek modellerin veri Ã¼zerindeki Ã¶nyargÄ±sÄ±nÄ± azaltmaktÄ±r.

------------------------------------------------------------------------

### ğŸ§­ Hangi NormalleÅŸtirme YÃ¶ntemi Ne Zaman KullanÄ±lÄ±r?

| YÃ¶ntem                       | KullanÄ±m Durumu                                | Not                                               |
|------------------------------|------------------------------------------------|---------------------------------------------------|
| **Min-Max**                  | DeÄŸerlerin 0â€“1 aralÄ±ÄŸÄ±na Ã§ekilmesi isteniyorsa | Ã–zellikle neural network, k-NN gibi yÃ¶ntemlerde   |
| **Z-Skoru**                  | Ortalama 0, sd 1 Ã¶lÃ§eÄŸi gerekiyorsa            | PCA, regresyon gibi analitik yÃ¶ntemlerde idealdir |
| **Robust Scaling**           | AykÄ±rÄ± deÄŸerlerin etkisini azaltmak istiyorsan | Medyan ve IQR kullanÄ±mÄ± sayesinde daha saÄŸlam     |
| **Standardizasyon Gereksiz** | AÄŸaÃ§ tabanlÄ± yÃ¶ntemler (decision tree, RF)     | Bu modeller Ã¶lÃ§ek duyarlÄ± deÄŸildir                |

### ğŸ§  Tavsiye:

-   **Veri tipine ve modeline gÃ¶re karar ver.**
-   Girdilerin farklÄ± Ã¶lÃ§eklerde olmasÄ±, Ã¶zellikle *uzaklÄ±k-temelli* ve *parametrik* modellerde sonuÃ§larÄ± bozar.
-   AykÄ±rÄ± deÄŸer varsa â†’ `Robust Scaling`
-   TÃ¼m veri normalize deÄŸilse â†’ karÅŸÄ±laÅŸtÄ±rmalar yanÄ±ltÄ±cÄ± olabilir.

------------------------------------------------------------------------

### ğŸ“Œ Neler Ã–ÄŸrendik?

-   **Eksik Veriler:**
    -   MCAR / MAR / MNAR farklarÄ±
    -   Basit ve geliÅŸmiÅŸ imputasyon yÃ¶ntemleri (`mean`, `mice`, `missForest`)
    -   Ã‡oklu imputasyonun mantÄ±ÄŸÄ± ve R ile uygulamasÄ±
-   **AykÄ±rÄ± DeÄŸerler:**
    -   IQR ve Z-skoru yÃ¶ntemleriyle tespit
    -   GÃ¶rsel analiz (boxplot)
    -   AykÄ±rÄ± deÄŸerlerle nasÄ±l baÅŸa Ã§Ä±kÄ±lÄ±r?
-   **Veri NormalleÅŸtirme:**
    -   Min-Max, Z-skoru, Robust scaling
    -   Hangi yÃ¶ntem ne zaman kullanÄ±lmalÄ±?
    -   Model Ã¶ncesi Ã¶lÃ§ekleme fark yaratÄ±r!

------------------------------------------------------------------------

### ğŸ™ TeÅŸekkÃ¼rler

> KatÄ±lÄ±mÄ±nÄ±z ve ilginiz iÃ§in Ã§ok teÅŸekkÃ¼rler!\
> GÃ¶rÃ¼ÅŸmek Ã¼zere ğŸ‘‹\
> **Dr. M. Fatih TÃ¼zen**
>
> ğŸ“§ fatih.tuzen\@tuik.gov.tr\
> [rprogramlama.netlify.app](https://rprogramlama.netlify.app)\
> [linkedin.com/in/dr-m-fatih-t-2b2a4328](https://www.linkedin.com/in/dr-m-fatih-t-2b2a4328/)
